<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To-Do Liste</title>
    <!-- <link rel="shortcut icon" href="../Bilder/favicon.ico" type="image/x-icon">geht nicht-->
    <link rel="stylesheet" href="../static/style.css" />
    <link rel="stylesheet" href="../static/button.css" />
  </head>
  <body>
    <h1>To-Do-Liste von Tim, Niklas & Noah</h1>
    <div style="display: flex; gap: 10px;">
      <button id="NewItem" onclick="oeffnePopup()">New Item</button>
      <form id="deleteForm" method="POST" action="{{ url_for('loesche_eingaben') }}">
        <button id="delete" type="submit">&#128465;</button>      
    </div>

      <form id="deleteForm" method="POST">
  <table>
    <thead>
      <tr>
        <th>Auswahl</th>
        <th>Aufgabe</th>
        <th>Datum</th>
        <th>Name</th>
      </tr>
    </thead>
    <tbody>
      {% for eingabe in eingaben %}
      <tr>
        <td><input type="checkbox" name="eingabe_ids" value="{{ eingabe.id }}"></td>
        <td>{{ eingabe.daten }}</td>
        <td>{{ eingabe.datum }}</td>
        <td>{{ eingabe.name }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  
</form>


    <script>
      window.addEventListener(
        "message",
        function (event) {
          var empfangeneDaten = event.data.eingabeDaten;
          var empfangenesDatum = event.data.eingabeDatum;
          var empfangenerName = event.data.eingabeName;
          // Hier werden die empfangenen Daten in die Tabelle ein
          var tbody = document.querySelector("table tbody");
          var newRow = tbody.insertRow();
          var cellDaten = newRow.insertCell(0);
          var cellDatum = newRow.insertCell(1);
          var cellName = newRow.insertCell(2);
          cellDaten.textContent = empfangeneDaten;
          cellDatum.textContent = empfangenesDatum;
          cellName.textContent = empfangenerName;
        },
        false
      );
      function oeffnePopup() {
        var popup = window.open("/popup", "_blank", "width=400,height=400");
      }
    </script>
  </body>
</html>
